{"version":3,"file":"component---src-pages-particle-system-tsx-358f9a3b23d4ec4e8607.js","mappings":"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","sources":["webpack://yuni-q-blog/./src/pages/particle-system.tsx"],"sourcesContent":["import React, { useEffect } from 'react';\n\nclass Particle {\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  r: number;\n  dt: number;\n  color: string;\n  ctx: CanvasRenderingContext2D;\n  width: number;\n  height: number;\n  constructor(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    this.x = Math.random() * width;\n    this.y = Math.random() * height;\n    this.vx = this.sinRandom() * 30;\n    this.vy = this.sinRandom() * 30;\n    this.r = Math.abs(this.sinRandom() * 20) + 5;\n    this.dt = 0.1;\n    this.color = this.randomColor();\n    this.ctx = ctx;\n\n    this.width = width;\n    this.height = height;\n  }\n\n  sinRandom() {\n    return Math.random() * 2 - 1;\n  }\n\n  draw() {\n    this.ctx.fillStyle = this.color;\n    this.ctx.beginPath();\n    this.ctx.arc(this.x, this.y, this.r, 0, Math.PI * 2, false);\n    this.ctx.closePath();\n    this.ctx.fill();\n  }\n\n  update() {\n    this.x += this.vx * this.dt;\n    this.y += this.vy * this.dt;\n    this.bound();\n  }\n\n  bound() {\n    if (this.x < 0) {\n      this.x = 0;\n      this.vx *= -1;\n    }\n    if (this.y < 0) {\n      this.y = 0;\n      this.vy *= -1;\n    }\n    if (this.x > this.width) {\n      this.x = this.width;\n      this.vx *= -1;\n    }\n    if (this.y > this.height) {\n      this.y = this.height;\n      this.vy *= -1;\n    }\n  }\n\n  randomColor() {\n    return `hsl(${Math.floor(Math.random() * 360)}, 100%, 50%)`;\n    return `hsl(${Math.floor(Math.random() * 100 + 100)}, 100%, 50%)`;\n    return `hsla(${Math.floor(Math.random() * 100 + 100)}, 100%, 50%, 0.02)`;\n  }\n}\n\nclass App {\n  particles: Particle[] = [];\n  pause: boolean;\n  ctx: CanvasRenderingContext2D;\n  width: number;\n  height: number;\n  constructor(ctx: CanvasRenderingContext2D, width: number, height: number) {\n    this.particles = [];\n    this.pause = false;\n    this.ctx = ctx;\n    this.width = width;\n    this.height = height;\n  }\n\n  addParticles(n) {\n    for (let i = 0; i < n; i++) {\n      const particle = new Particle(this.ctx, this.width, this.height);\n      this.particles.push(particle);\n    }\n  }\n\n  clearParticles() {\n    this.particles = [];\n  }\n\n  loop() {\n    if (this.pause) {\n      return;\n    }\n    this.ctx.clearRect(0, 0, this.width, this.height);\n    this.particles.forEach((particle) => {\n      this.interact(particle);\n      particle.update();\n      particle.draw();\n    });\n    this.loopDelegate();\n  }\n\n  loopDelegate() {\n    const loop = this.loop.bind(this);\n    requestAnimationFrame(loop);\n  }\n\n  interact(other) {\n    this.particles.forEach((particle) => {\n      if (other !== particle) {\n        const dx = other.x - particle.x;\n        const dy = other.y - particle.y;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        if (d > 0) {\n          const R = other.r + particle.r;\n          if (d < R) {\n            const dR = R - d;\n            const ux = dx / d;\n            const uy = dy / d;\n            other.vx += ux * dR * 0.1;\n            other.vy += uy * dR * 0.1;\n            particle.vx += -ux * dR * 0.1;\n            particle.vy += -uy * dR * 0.1;\n          }\n        }\n      }\n    });\n  }\n}\n\nconst ParticleSystem: React.VFC = () => {\n  useEffect(() => {\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    document.body.appendChild(canvas);\n\n    const WIDTH = window.innerWidth;\n    const HEIGHT = window.innerHeight;\n\n    canvas.width = WIDTH;\n    canvas.height = HEIGHT;\n\n    ctx.clearRect(0, 0, WIDTH, HEIGHT);\n\n    const app = new App(ctx, WIDTH, HEIGHT);\n    app.addParticles(100);\n    app.loopDelegate();\n  }, []);\n\n  return <></>;\n};\n\nexport default ParticleSystem;\n"],"names":["Particle","ctx","width","height","this","x","Math","random","y","vx","sinRandom","vy","r","abs","dt","color","randomColor","_proto","prototype","draw","fillStyle","beginPath","arc","PI","closePath","fill","update","bound","floor","App","particles","pause","_proto2","addParticles","n","i","particle","push","clearParticles","loop","clearRect","forEach","interact","loopDelegate","bind","requestAnimationFrame","other","dx","dy","d","sqrt","R","dR","ux","uy","ParticleSystem","useEffect","canvas","document","createElement","getContext","body","appendChild","WIDTH","window","innerWidth","HEIGHT","innerHeight","app","React"],"sourceRoot":""}